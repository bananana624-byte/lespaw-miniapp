/* LESPAW STYLE v185 — prod-safe UX/analytics */

:root{
  --lp-text: #fff;
  --lp-glow-1: rgba(190,120,255,.45);
  --lp-glow-2: rgba(190,120,255,.35);
  --lp-border-glow: rgba(190,120,255,.55);
  --lp-diag-bg: rgba(0,0,0,.35);
  --lp-diag-border: rgba(190,120,255,.28);
}

*{ box-sizing:border-box; }
html,body{ height:100%; overflow-x:hidden; }
body{
  margin:0;
  font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial;
  color:#fff;
  min-height:100vh;

  background:
    radial-gradient(1000px 700px at 50% -10%, rgba(190,120,255,.65), transparent 58%),
    radial-gradient(900px 700px at 50% 35%, rgba(125,60,255,.45), transparent 62%),
    radial-gradient(850px 650px at 50% 110%, rgba(190,120,255,.22), transparent 60%),
    linear-gradient(180deg, #3a007a 0%, #170047 55%, #070018 100%);
  background-attachment: scroll;
}

@media (min-width: 900px){
  body{ background-attachment: fixed; }
}


/* top */
.top{ padding:14px 16px 8px; }
.titleGlow{
  font-weight:900;
  font-size:18px;
  letter-spacing:.2px;
  white-space:nowrap;
  overflow:hidden;
  text-overflow:ellipsis;
  text-shadow: 0 0 12px rgba(190,120,255,.55), 0 0 24px rgba(125,60,255,.40);
  margin-bottom:10px;
}

/* search */
.searchWrap{
  position:relative;
  width:100%;
  border-radius:18px;
  border:2px solid rgba(255,255,255,.55);
  background:rgba(0,0,0,.22);
  box-shadow:0 0 28px rgba(125,60,255,.35);
  overflow:hidden;
}
.searchInput{
  width:100%;
  border:none; outline:none;
  background:transparent;
  color:#fff;
  padding:14px 50px 14px 16px;
  font-size:16px;
}
.searchInput::placeholder{ color:rgba(255,255,255,.72); }

.searchWrap .searchInput{
  padding-right:92px;
}
.searchClear{
  position:absolute;
  right:44px;
  top:50%;
  transform:translateY(-50%);
  width:34px;
  height:34px;
  border-radius:999px;
  border:1px solid rgba(255,255,255,.35);
  background:rgba(0,0,0,.18);
  color:rgba(255,255,255,.9);
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:18px;
  line-height:1;
  cursor:pointer;
  opacity:0;
  pointer-events:none;
  transition:opacity .15s ease, transform .15s ease;
}
.searchWrap.hasText .searchClear{
  opacity:1;
  pointer-events:auto;
}
.searchClear:active{
  transform:translateY(-50%) scale(.96);
}

.searchIcon{
  position:absolute; right:14px; top:50%;
  transform:translateY(-50%);
  color:rgba(255,255,255,.95);
  width:26px; height:26px;
  display:grid; place-items:center;
}
.ico{ width:22px; height:22px; }

/* layout */
.wrap{
  max-width:860px;
  margin:0 auto;
  padding:12px 16px calc(160px + env(safe-area-inset-bottom)); /* было мало — кнопки перекрывали */
}
.view{ display:grid; gap:16px; }

hr{ border:0; border-top:1px solid rgba(0,0,0,.14); margin:12px 0; }
.row{ display:flex; gap:10px; flex-wrap:wrap; }
.list{ display:grid; gap:12px; }

/* tiles */
.tile{
  background:rgba(255,255,255,.96);
  border-radius:18px;
  padding:18px 18px 16px;
  border:2px solid rgba(255,255,255,.55);
  box-shadow: 0 18px 44px rgba(0,0,0,.35),
              0 0 0 3px rgba(255,255,255,.35),
              0 0 34px rgba(190,120,255,.55);
  cursor:pointer;
  transition: transform .08s ease, box-shadow .18s ease, filter .18s ease;
}
.tile:active{
  transform:scale(.99);
  filter:brightness(1.02);
  box-shadow: 0 22px 56px rgba(0,0,0,.40),
              0 0 0 3px rgba(255,255,255,.35),
              0 0 46px rgba(190,120,255,.78);
}
.tileTitle{
  color:#0b0b12;
  font-weight:1000;
  font-size: clamp(16px, 4.2vw, 20px);
  letter-spacing:.45px;
  text-transform:uppercase;
  line-height:1.05;
  /* FIX: на телефонах длинные заголовки не должны "уезжать" за экран */
  white-space:normal;
  overflow-wrap: normal;
  word-break:keep-all;
  hyphens: none;
  display:-webkit-box;
  -webkit-line-clamp:2;
  -webkit-box-orient:vertical;
  overflow:hidden;

  hyphens:none;

  text-wrap:balance;}
.tileSub{
  margin-top:10px;
  color:#7c2dff;
  font-weight:900;
  letter-spacing:.6px;
  text-transform:uppercase;
  font-size:12px;
  line-height:1.2;
  white-space:normal;
  overflow-wrap: normal;
  word-break:keep-all;
  hyphens: none;

  hyphens:none;

  text-wrap:balance;}

/* cards */
.card{
  background:rgba(255,255,255,.96);
  border-radius:18px;
  padding:16px;
  border:2px solid rgba(255,255,255,.55);
  box-shadow: 0 18px 44px rgba(0,0,0,.35), 0 0 34px rgba(125,60,255,.35);
  color:#0b0b12;
  padding-bottom:22px; /* чтобы низ карточек не прятался под навбар */
}
.h2{ margin:0 0 8px; font-size:22px; font-weight:1000; letter-spacing:.4px; }
.h3{
  margin:0;
  font-size:15px;
  font-weight:1000;
  letter-spacing:.45px;
  text-transform:uppercase;
  color:#0b0b12;
}
.small{ font-size:13px; line-height:1.5; color:rgba(11,11,18,.78); }

/* buttons */
.btn{
  padding:11px 12px;
  border-radius:14px;
  border:1px solid rgba(0,0,0,.14);
  background:rgba(0,0,0,.04);
  color:#0b0b12;
  cursor:pointer;
  transition: transform .08s ease, box-shadow .18s ease, filter .18s ease;
}
.btn:active{
  transform:scale(.985);
  box-shadow: 0 0 0 3px rgba(125,60,255,.20), 0 0 26px rgba(190,120,255,.35);
  filter:brightness(1.03);
}
.btn.is-active{
  border-color:rgba(125,60,255,.35);
  box-shadow: 0 0 0 3px rgba(125,60,255,.22), 0 0 30px rgba(190,120,255,.40);
}
/* product header */
.prodHead{ display:flex; gap:12px; align-items:flex-start; justify-content:space-between; }
.prodFav{
  width:48px; height:48px;
  border-radius:16px;
  border:1px solid rgba(0,0,0,.14);
  background:rgba(0,0,0,.04);
  cursor:pointer;
  display:grid; place-items:center;
}
.prodFav.is-active{
  border-color:rgba(255,92,122,.45);
  box-shadow: 0 0 0 3px rgba(255,92,122,.12), 0 0 22px rgba(255,92,122,.18);
}
.prodFav.is-active .heartGlyph{ color:#ff3b6b; }

.prodPrice{
  margin-top:10px;
  font-size:20px;
  font-weight:1000;
  color:#0b0b12;
}

/* generic clickable list item */
.item{
  display:block; /* фикс “всё в одну строку” в некоторых webview */
  background:rgba(0,0,0,.04);
  border:1px solid rgba(0,0,0,.12);
  border-radius:16px;
  padding:12px;
  cursor:pointer;
}
.title{
  display:block;
  font-weight:1000;
  line-height:1.25;
}
.meta{
  display:block;
  margin-top:6px;
  font-size:13px;
  line-height:1.25;
  color:rgba(11,11,18,.68);
}

/* product images */
.thumb{ width:100%; display:block; border-radius:14px; }

/* products grid 2x */
.grid2{
  display:grid;
  grid-template-columns: repeat(2, minmax(0, 1fr));
  gap:12px;
}
@media (max-width:360px){ .grid2{ grid-template-columns:1fr; } }

.pcard{
  background:rgba(0,0,0,.04);
  border:1px solid rgba(0,0,0,.12);
  border-radius:16px;
  padding:12px;
  cursor:pointer;
  overflow:hidden;
}
.pcardImg{
  width:100%;
  aspect-ratio: 1/1;
  object-fit: contain;
  border-radius:12px;
  display:block;
  margin-bottom:8px;
  background:rgba(0,0,0,.06);
}
.pcardTitle{
  font-weight:1000;
  font-size:14px;
  line-height:1.2;
  color:#0b0b12;
  display:-webkit-box;
  -webkit-line-clamp:2;
  -webkit-box-orient:vertical;
  overflow:hidden;
  overflow-wrap:anywhere;
}
.pcardMeta{
  margin-top:6px;
  font-size:12px;
  line-height:1.25;
  color:rgba(11,11,18,.68);
  white-space:nowrap;
  overflow:hidden;
  text-overflow:ellipsis;
}

.pcardPrice{
  margin-top:8px;
  font-size:14px;
  line-height:1.1;
  font-weight:1000;
  color:#0b0b12;
}
.iconBtn .i{
  font-size:16px;
  line-height:1;
}
.iconBtn.is-fav{
  color:#0b0b12;
}
.iconBtn.is-fav.is-active{
  color:#d21c3c;
  border-color:rgba(210,28,60,.25);
  box-shadow: 0 0 0 3px rgba(210,28,60,.10), 0 0 18px rgba(210,28,60,.18);
}

/* Cart / Fav rows with thumbs */
.miniRow{
  display:flex;
  gap:12px;
  align-items:flex-start;
}
.miniBody{ flex:1; min-width:0; }
.miniOpts{
  margin-top:6px;
  font-size:12px;
  line-height:1.25;
  color:rgba(11,11,18,.70);
}
.miniQty{
  font-weight:900;
  color:rgba(11,11,18,.65);
}
.miniThumbStub{
  width:56px;
  height:56px;
  border-radius:14px;
  border:1px solid rgba(0,0,0,.10);
  background:rgba(0,0,0,.06);
  flex:0 0 auto;
}

.emptyBox{
  background:rgba(0,0,0,.04);
  border:1px solid rgba(0,0,0,.12);
  border-radius:16px;
  padding:14px;
}

/* Product options panels */
.optPanel{
  background:rgba(0,0,0,.04);
  border:1px solid rgba(0,0,0,.12);
  border-radius:16px;
  padding:12px;
}
.optFill{
  width:10px;
  height:10px;
  border-radius:3px;
  background:rgba(125,60,255,.85);
  opacity:0;
}
.optItem.is-active .optFill{ opacity:1; }
.optBox .tick{ font-size:12px; line-height:1; opacity:0; }
.optItem.is-active{
  border-color:rgba(125,60,255,.32);
  box-shadow: 0 0 0 3px rgba(125,60,255,.12);
}
.optItem.is-active .optBox .tick{ opacity:1; }
/* =====================
   Compact grids (Categories / Fandoms)
===================== */
.catGrid,
.fandomGrid{
  display:grid;
  grid-template-columns: repeat(2, minmax(0, 1fr));
  gap:12px;
}
@media (max-width:360px){
  .catGrid,
  .fandomGrid{ grid-template-columns:1fr; }
}

.catBtn,
.fandomBtn{
  background:rgba(0,0,0,.04);
  border:1px solid rgba(0,0,0,.12);
  border-radius:16px;
  padding:12px;
  cursor:pointer;

  /* FIX: аккуратный центр + единая типографика */
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  gap:8px;

  text-align:center;
  min-height: 86px;
  line-height:1.2;
}
.catBtn{ padding:11px 10px; }

.catTitle,
.fandomTitle{
  width:100%;
  font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial;
  font-weight:1000;
  font-size: clamp(13px, 3.6vw, 15px);
  line-height:1.15;
  letter-spacing:.2px;

  /* перенос ТОЛЬКО по словам: никаких разрывов по буквам */
  white-space:normal;
  overflow:visible;
  text-overflow:unset;
  overflow-wrap:normal;
  word-break:keep-all;
  hyphens:none;
  text-wrap:balance;

  display:block;
  text-align:center;
}
.catEmoji{
  display:block;
  margin-top:8px;
  font-size:18px;
  line-height:1;
  text-align:center;
}

/* =====================
   Product cards: price + actions under price
===================== */
.pcardPrice{
  margin-top:8px;
  font-weight:1000;
  font-size:14px;
  line-height:1.1;
  color:#0b0b12;
}
.pcardActions{
  margin-top:10px;
  display:flex;
  gap:10px;
}
.iconBtn{
  flex:1;
  border:1px solid rgba(0,0,0,.14);
  background:rgba(0,0,0,.04);
  border-radius:14px;
  padding:10px 12px;
  font-weight:1000;
  cursor:pointer;
  display:flex;
  align-items:center;
  justify-content:center;
  gap:8px;
}
.iconBtn:active{
  transform:scale(.985);
  box-shadow: 0 0 0 3px rgba(125,60,255,.20), 0 0 26px rgba(190,120,255,.30);
}
.iconBtnHeart.is-active{
  border-color:rgba(255,92,122,.45);
  box-shadow: 0 0 0 3px rgba(255,92,122,.12), 0 0 22px rgba(255,92,122,.18);
}
.iconBtnHeart.is-active .heartGlyph{ color:#ff3b6b; }
.heartGlyph{ font-size:16px; line-height:1; }
.plusGlyph{ font-size:18px; line-height:1; }

/* =====================
   Cart / Favorites rows with thumb
===================== */
.miniRow{
  display:flex;
  gap:12px;
  align-items:flex-start;
}
.miniThumb{
  width:56px;
  height:56px;
  border-radius:14px;
  object-fit:cover;
  border:1px solid rgba(0,0,0,.10);
  background:rgba(0,0,0,.06);
  flex:0 0 auto;
}
.miniMain{ flex:1; min-width:0; }
.miniTitle{
  font-weight:1000;
  line-height:1.2;
  white-space:normal;
  overflow:visible;
  overflow-wrap:anywhere;
}
.miniPrice{
  margin-top:6px;
  font-weight:1000;
  font-size:14px;
  color:#0b0b12;
}
.miniOpt{
  margin-top:6px;
  font-size:12px;
  line-height:1.3;
  color:rgba(11,11,18,.70);
}

/* =====================
   Options panels in product page
===================== */
.optPanel{
  background:rgba(0,0,0,.04);
  border:1px solid rgba(0,0,0,.12);
  border-radius:16px;
  padding:12px;
}
.optTitle{
  font-weight:1000;
  color:#0b0b12;
}
.optHint{
  margin-top:6px;
  font-size:12px;
  color:rgba(11,11,18,.70);
  line-height:1.35;
}
.optList{
  margin-top:10px;
  display:grid;
  gap:8px;
}
.optItem{
  display:flex;
  gap:10px;
  align-items:flex-start;
  cursor:pointer;
  padding:8px 10px;
  border-radius:14px;
  border:1px solid rgba(0,0,0,.10);
  background:rgba(255,255,255,.50);
}
.optItem:active{ transform:scale(.99); }
.optBox{
  width:18px;
  height:18px;
  border-radius:6px;
  border:2px solid rgba(0,0,0,.25);
  display:grid;
  place-items:center;
  margin-top:1px;
  flex:0 0 auto;
}
.optItem.is-active .optBox{
  border-color:rgba(125,60,255,.65);
  box-shadow: 0 0 0 3px rgba(125,60,255,.14);
}
.optCheck{
  width:10px;
  height:10px;
  border-radius:3px;
  background:rgba(125,60,255,.85);
  display:none;
}
.optItem.is-active .optCheck{ display:block; }
.optLabel{
  font-weight:900;
  font-size:13px;
  line-height:1.25;
  color:#0b0b12;
  text-align:left;
}
.optDelta{ white-space:nowrap; display:inline-block; }

.btnGhost{
  border:1px dashed rgba(125,60,255,.55);
  background:rgba(190,120,255,.10);
}

/* lamination examples */
.exGrid{ margin-top:10px; }
.exCard{
  background:rgba(0,0,0,.04);
  border:1px solid rgba(0,0,0,.12);
  border-radius:16px;
  padding:12px;
  cursor:pointer;
  overflow:hidden;
}
.exImg{
  width:100%;
  aspect-ratio: 1/1;
  object-fit: contain;
  border-radius:12px;
  display:block;
  margin-bottom:8px;
  background:rgba(0,0,0,.06);
}
.exTitle{
  font-weight:1000;
  font-size:14px;
  line-height:1.2;
  color:#0b0b12;
}
.exMeta{
  margin-top:6px;
  font-size:12px;
  line-height:1.25;
  color:rgba(11,11,18,.68);
}
.exStub{
  width:100%;
  aspect-ratio: 1/1;
  border-radius:12px;
  background:rgba(0,0,0,.06);
  display:grid;
  place-items:center;
  position:relative;
  overflow:hidden;
  margin-bottom:8px;
}
.exStubGlow{
  position:absolute;
  inset:-40%;
  background: radial-gradient(circle at 50% 50%, rgba(190,120,255,.55), transparent 55%);
  filter: blur(10px);
}
.exStubText{
  position:relative;
  font-weight:1000;
  font-size:12px;
  color:rgba(11,11,18,.72);
  text-transform:uppercase;
  letter-spacing:.7px;
}

.exBig{ display:grid; gap:12px; }
.exBigBtn{
  border:none;
  padding:0;
  background:transparent;
  cursor:pointer;
}
.exBigImg{
  width:100%;
  border-radius:14px;
  display:block;
  background:rgba(0,0,0,.06);
}

/* bottom nav */
.navBar{
  position:fixed;
  left:50%;
  bottom: calc(18px + env(safe-area-inset-bottom));
  transform:translateX(-50%);
  z-index:9999;
  display:flex;
  gap:18px;
  align-items:center;
  justify-content:center;
}

/* nav responsive */
@media (max-width: 380px){
  .navBar{ gap:14px; }
}
.navBtn{
  position:relative;
  touch-action: manipulation;
  -webkit-tap-highlight-color: transparent;
  width:74px; height:66px;
  border-radius:18px;
  background:rgba(255,255,255,.96);
  border:2px solid rgba(255,255,255,.60);
  color:#0b0b12;
  box-shadow: 0 18px 44px rgba(0,0,0,.40), 0 0 34px rgba(190,120,255,.60);
  cursor:pointer;
  transition: transform .08s ease, box-shadow .18s ease, filter .18s ease;
}
.navBtn:active{
  transform:scale(.985);
  filter:brightness(1.02);
  box-shadow: 0 18px 44px rgba(0,0,0,.40), 0 0 46px rgba(190,120,255,.90);
}
.navBtn.is-active{
  box-shadow: 0 18px 44px rgba(0,0,0,.40), 0 0 52px rgba(125,60,255,.95);
}
.navIco{ width:30px; height:30px; }
.badge{
  position:absolute;
  top:-10px; right:-10px;
  min-width:22px; height:22px;
  padding:0 7px;
  border-radius:999px;
  display:grid; place-items:center;
  font-size:12px;
  font-weight:1000;
  color:#fff;
  background: linear-gradient(180deg, #c07aff, #7c2dff);
  box-shadow: 0 0 0 3px rgba(255,255,255,.96), 0 0 26px rgba(190,120,255,.70);
}

/* toast */
.toast{
  position:fixed;
  left:50%;
  bottom: calc(132px + env(safe-area-inset-bottom)); /* чуть выше навбара */
  transform:translateX(-50%);
  z-index:999;
  background:rgba(255,255,255,.96);
  color:#0b0b12;
  padding:10px 12px;
  border-radius:14px;
  border:1px solid rgba(0,0,0,.12);
  box-shadow: 0 18px 44px rgba(0,0,0,.35), 0 0 26px rgba(190,120,255,.35);
  max-width:92vw;
  font-size:13px;
}
.toast.good{ box-shadow: 0 18px 44px rgba(0,0,0,.35), 0 0 26px rgba(114,255,182,.25); }
.toast.ok{ box-shadow: 0 18px 44px rgba(0,0,0,.35), 0 0 26px rgba(114,255,182,.25); }
.toast.warn{ box-shadow: 0 18px 44px rgba(0,0,0,.35), 0 0 26px rgba(255,92,122,.25); }

/* inputs inside white cards (checkout) */
.card .searchInput{
  color:#0b0b12;
  background:rgba(0,0,0,.04);
  border:1px solid rgba(0,0,0,.12);
  border-radius:14px;
  padding:12px 14px;
}
.card .searchInput::placeholder{ color:rgba(11,11,18,.55); }

/* =====================
   Reviews
===================== */
.revHero{
  display:flex;
  gap:10px;
  margin-top:10px;
}
.revStat{
  flex:1;
  background:rgba(0,0,0,.04);
  border:1px solid rgba(0,0,0,.12);
  border-radius:16px;
  padding:12px;
}
.revStatBig{
  font-weight:1000;
  font-size:24px;
  line-height:1;
}
.revStatSmall{
  margin-top:6px;
  font-size:12px;
  color:rgba(11,11,18,.68);
  font-weight:800;
  letter-spacing:.3px;
  text-transform:uppercase;
}

.chips{
  display:flex;
  gap:8px;
  flex-wrap:wrap;
  margin-top:12px;
}
.chip{
  border:none;
  cursor:pointer;
  padding:9px 12px;
  border-radius:999px;
  background:rgba(0,0,0,.06);
  border:1px solid rgba(0,0,0,.12);
  color:#0b0b12;
  font-weight:900;
  font-size:13px;
  transition: transform .08s ease, box-shadow .18s ease, filter .18s ease;
}
.chip:active{
  transform:scale(.985);
  box-shadow: 0 0 0 3px rgba(125,60,255,.18), 0 0 24px rgba(190,120,255,.28);
  filter:brightness(1.03);
}
.chip.is-active{
  background: linear-gradient(180deg, rgba(190,120,255,.26), rgba(125,60,255,.18));
  border-color:rgba(125,60,255,.35);
  box-shadow: 0 0 0 3px rgba(125,60,255,.16), 0 0 28px rgba(190,120,255,.25);
}

.reviewList{
  display:grid;
  gap:12px;
  margin-top:12px;
}

.reviewCard{
  background:rgba(0,0,0,.04);
  border:1px solid rgba(0,0,0,.12);
  border-radius:16px;
  padding:12px;
}

.reviewTop{
  display:flex;
  gap:10px;
  align-items:center;
}

.reviewAvatar{
  width:42px;
  height:42px;
  border-radius:14px;
  display:grid;
  place-items:center;
  font-weight:1000;
  color:#0b0b12;
  background: linear-gradient(180deg, rgba(190,120,255,.55), rgba(125,60,255,.35));
  border:1px solid rgba(0,0,0,.10);
}

.reviewHead{ flex:1; min-width:0; }
.reviewAuthor{
  font-weight:1000;
  line-height:1.2;
  white-space:nowrap;
  overflow:hidden;
  text-overflow:ellipsis;
}
.reviewMeta{
  display:flex;
  gap:10px;
  align-items:center;
  margin-top:4px;
  flex-wrap:wrap;
}
.reviewDate{
  font-size:12px;
  color:rgba(11,11,18,.65);
  font-weight:800;
}
.stars{
  font-size:12px;
  letter-spacing:.6px;
  color:rgba(11,11,18,.78);
  font-weight:1000;
}

/* фото в отзыве: превью без открытия */
.reviewPhotoWrap{
  margin-top:10px;
  width:100%;
}

.reviewPhotoBtn{
  margin-top:10px;
  padding:0;
  border:none;
  background:transparent;
  cursor:pointer;
  width:100%;
}
.reviewPhoto{
  width:100%;
  display:block;
  border-radius:14px;
  border:1px solid rgba(0,0,0,.10);
  object-fit:cover;
  max-height:280px;
}

.reviewText{
  margin-top:10px;
  font-size:14px;
  line-height:1.45;
  color:rgba(11,11,18,.92);
  white-space:pre-line;

  /* folded by default */
  display:-webkit-box;
  -webkit-line-clamp:6;
  -webkit-box-orient:vertical;
  overflow:hidden;
}
.reviewText.is-open{
  -webkit-line-clamp:unset;
  display:block;
}

.reviewTextWrap{ margin-top:10px; }

.reviewMore{
  margin-top:8px;
  border:none;
  background:transparent;
  padding:0;
  cursor:pointer;
  font-weight:900;
  font-size:13px;
  color:#7c2dff;
  text-decoration:underline;
  text-underline-offset:3px;
}
.reviewMore:active{
  filter:brightness(1.05);
}

.reviewActions{
  margin-top:10px;
  display:flex;
  justify-content:flex-start;
}

.btnMini{
  padding:9px 10px;
  border-radius:12px;
  font-size:13px;
}

/* =====================
   Important Info + Checkout must-read
===================== */

/* Important Info */
.infoLead{
  margin-top:-2px;
  color:rgba(11,11,18,.72);
}

.infoStack{
  display:grid;
  gap:12px;
  margin-top:12px;
}

.infoSection{
  background:rgba(0,0,0,.04);
  border:1px solid rgba(0,0,0,.12);
  border-radius:16px;
  padding:12px;
}

.infoTitle{
  font-weight:1000;
  font-size:15px;
  letter-spacing:.2px;
  color:#0b0b12;
}

.infoList{
  margin:8px 0 0;
  padding-left:18px;
  color:rgba(11,11,18,.88);
  font-size:14px;
  line-height:1.45;
}
.infoList li{ margin:6px 0; }

.infoNote{
  margin-top:10px;
  font-size:13px;
  line-height:1.45;
  color:rgba(11,11,18,.70);
}

.infoLinkBtn{
  margin-top:10px;
  width:100%;
  border:none;
  cursor:pointer;
  padding:11px 12px;
  border-radius:14px;
  font-weight:1000;
  letter-spacing:.2px;
  color:#0b0b12;
  background: linear-gradient(180deg, rgba(190,120,255,.22), rgba(125,60,255,.16));
  border:1px solid rgba(125,60,255,.28);
  box-shadow: 0 0 0 3px rgba(125,60,255,.10), 0 0 26px rgba(190,120,255,.22);
}
.infoLinkBtn:active{
  transform:scale(.985);
  filter:brightness(1.03);
}
/* Checkout must-read banner */
.mustRead{
  margin-top:10px;
  padding:12px;
  border-radius:16px;
  border:1px solid rgba(0,0,0,.12);
  background: linear-gradient(180deg, rgba(190,120,255,.22), rgba(255,255,255,.00));
  box-shadow: 0 0 0 3px rgba(125,60,255,.10), 0 0 24px rgba(190,120,255,.18);
}

.mustReadText{
  font-size:13px;
  line-height:1.45;
  color:rgba(11,11,18,.80);
}

.mustReadBtn{
  margin-top:10px;
  width:100%;
  border:none;
  cursor:pointer;
  padding:11px 12px;
  border-radius:14px;
  font-weight:1000;
  color:#0b0b12;
  background:rgba(0,0,0,.04);
  border:1px solid rgba(0,0,0,.12);
}
.mustReadBtn:active{
  transform:scale(.985);
  box-shadow: 0 0 0 3px rgba(125,60,255,.18), 0 0 24px rgba(190,120,255,.28);
}

/* disabled buttons */
.btn.is-disabled, .btn:disabled{
  opacity:.55;
  cursor:not-allowed;
  filter:saturate(.9);
  transform:none;
  box-shadow:none;
}

/* Checkout checks */
.checkoutGap{ height:12px; }

.checkoutChecks{
  display:grid;
  gap:10px;
}
.checkRow{
  display:flex;
  gap:10px;
  align-items:flex-start;
  user-select:none;
}

.checkHint{
  display:inline-block;
  margin-left:6px;
  font-weight:900;
  color:rgba(124,45,255,.95);
}
.checkSub{
  display:block;
  margin-top:4px;
  opacity:.78;
  font-weight:700;
  color:rgba(255,255,255,.86);
}

/* Indent rows under thumb (Cart qty row) */
.miniIndentRow{ margin-left: calc(56px + 12px); }

.optKey{ font-weight:1000; color:#0b0b12; }


/* checkout validation errors */
.field-error{ border-color: rgba(255,59,107,.85) !important; box-shadow: 0 0 0 3px rgba(255,59,107,.18), 0 0 22px rgba(255,59,107,.18) !important; }
.checkRow.is-error{ padding:10px; border-radius:14px; border:1px solid rgba(255,59,107,.55); background: rgba(255,59,107,.08); box-shadow: 0 0 0 3px rgba(255,59,107,.14), 0 0 22px rgba(255,59,107,.14); }
.checkRow.is-disabled{ opacity:.75; }
.checkRow.is-disabled input{ pointer-events:none; }



/* ===== Checkout blocks (v99) ===== */
.checkoutSection{margin-top:2px}
.checkoutSectionTitle{font-weight:800;letter-spacing:.2px;margin:2px 0 10px 0;font-size:16px}
.checkoutBlock{border:1px solid rgba(255,255,255,.22);background:rgba(255,255,255,.08);border-radius:18px;padding:12px 12px 10px 12px;margin:10px 0;box-shadow:0 8px 20px rgba(0,0,0,.12)}
.checkoutBlockTop{display:flex;align-items:center;justify-content:space-between;gap:10px}
.checkoutBlockTitle{font-weight:800;font-size:15px}
.checkoutBlockText{opacity:.95;line-height:1.35;margin-top:8px}
.checkWrap{margin-top:10px;padding:10px;border-radius:14px;background:rgba(0,0,0,.12);border:1px dashed rgba(255,255,255,.22)}
.btnSmall{padding:10px 12px;border-radius:14px}
.checkoutNote{margin-top:12px}


/* Итого: примечание про доставку */
.totalNote{display:block;margin-top:4px;opacity:.7;font-size:12px;line-height:1.25;}


/* =====================
   Product descriptions: readable blocks
===================== */
.descBlocks{
  display:grid;
  gap:10px;
}
.dBlock{
  background:rgba(0,0,0,.03);
  border:1px solid rgba(0,0,0,.10);
  border-radius:16px;
  padding:10px 12px;
  font-size:13px;
  line-height:1.45;
  color:rgba(11,11,18,.78);
}

.dTitle{
  font-weight:800;
  color:#0b0b12;
  letter-spacing:.2px;
  margin-bottom:6px;
}
.dText{
  color:rgba(11,11,18,.78);
}


/* v128 additions */
.btnIcon{flex:0 0 56px; width:56px; padding:11px 0; display:flex; align-items:center; justify-content:center;}
.pcardMini{padding-bottom:12px; background:rgba(255,255,255,.92); border:1px solid rgba(0,0,0,.10); box-shadow: 0 10px 24px rgba(0,0,0,.10);}
.pcardMini .pcardActions{display:none;}


/* Home: Новинки */
.homeSection{
  margin-top:14px;
  background:rgba(255,255,255,.96);
  border-radius:18px;
  padding:16px 16px 14px;
  border:2px solid rgba(255,255,255,.55);
  box-shadow: 0 18px 44px rgba(0,0,0,.28),
              0 0 0 3px rgba(255,255,255,.30),
              0 0 26px rgba(190,120,255,.45);
}
.homeSection .small{ margin-top:-2px; }

/* Home sections: text on white panels */
.homeSection .h2{ color:#0b0b12; }

/* Новинки: вкусное оформление */
.newSection{ padding-top:14px; }
.newHeader{
  display:flex;
  flex-direction:column;
  gap:6px;
}
.newTitleRow{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:10px;
}
.newTitle{
  font-size:22px;
  font-weight:1000;
  letter-spacing:.4px;
  color:#0b0b12;
}
.newChip{
  font-size:11px;
  font-weight:900;
  letter-spacing:.6px;
  padding:6px 10px;
  border-radius:999px;
  color:#fff;
  background: linear-gradient(135deg, rgba(160,90,255,.95), rgba(95,210,255,.70));
  box-shadow: 0 10px 22px rgba(0,0,0,.18), 0 0 18px rgba(190,120,255,.45);
}
.newSub{
  font-size:13px;
  line-height:1.4;
  color: rgba(10,10,18,.70);
}
.newDivider{
  height:1px;
  width:100%;
  margin-top:10px;
  background: linear-gradient(90deg, rgba(125,60,255,.00), rgba(125,60,255,.35), rgba(125,60,255,.00));
}


.newWrap{
  margin-top:10px;
  display:flex;
  flex-direction:column;
  gap:10px;
}
.newCarousel::-webkit-scrollbar{ display:none; }
.newCarousel{
  display:flex;
  overflow-x:auto;
  scroll-snap-type:x mandatory;
  -webkit-overflow-scrolling: touch;
  scroll-behavior:smooth;
  gap:12px;
  padding:2px 2px 0;
  scrollbar-width:none;
}


.newPage{
  flex:0 0 100%;
  scroll-snap-align:start;
  display:grid;
  grid-template-columns: repeat(2, minmax(0,1fr));
  gap:12px;
}

.newPage .newCard{ width:100%; }

/* Кнопки навигации под каруселью — видны на всех устройствах */
.newControls{
  display:flex;
  align-items:center;
  justify-content:center;
  gap:12px;
  padding:0 6px 10px;
}

.newNavBtn{
  width:40px;
  height:40px;
  border-radius:999px;
  border:1px solid rgba(0,0,0,.10);
  background: rgba(255,255,255,.95);
  box-shadow: 0 12px 22px rgba(0,0,0,.12);
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:26px;
  font-weight:900;
  color:#14141c;
  cursor:pointer;
  user-select:none;
}
.newNavBtn:active{ transform: scale(.98); }
.newNavBtn:disabled{
  opacity:.35;
  cursor:default;
}

.newDots{
  display:flex;
  align-items:center;
  gap:6px;
  min-width:60px;
  justify-content:center;
}

.newDot{
  width:7px;
  height:7px;
  border-radius:999px;
  background: rgba(20,20,28,.22);
}
.newDot.isActive{
  width:18px;
  background: linear-gradient(135deg, rgba(160,90,255,.95), rgba(95,210,255,.75));
  box-shadow: 0 0 12px rgba(170,120,255,.45);
}


/* Accessibility: respect reduced motion */
@media (prefers-reduced-motion: reduce) {
  * { transition: none !important; animation: none !important; }
}


/* Inline field error text */
.fieldHelp{ display:none; margin-top:6px; color: rgba(255,59,107,.9); }
.fieldHelp.is-show{ display:block; }


/* v170: search empty state + checkout status */
.emptyState{margin-top:12px;padding:14px;border-radius:16px;border:1px solid rgba(255,255,255,.18);background:rgba(0,0,0,.10)}
.emptyTitle{font-weight:800;font-size:18px;letter-spacing:.2px;margin-bottom:6px}
.emptyText{opacity:.92;line-height:1.35}
.checkStatus{display:inline-block;margin-left:8px;padding:3px 8px;border-radius:999px;font-size:12px;font-weight:700;vertical-align:middle;border:1px solid rgba(255,255,255,.20);opacity:.9}


/* ===== Cart summary ===== */
.cartSummary{
  display:flex;
  gap:12px;
  align-items:center;
  justify-content:space-between;
  flex-wrap:wrap;
  padding:12px 12px;
  border-radius:16px;
  background:rgba(0,0,0,.10);
  border:1px solid rgba(255,255,255,.18);
}
.cartSummaryLeft{min-width:200px}
.cartSummarySum{font-weight:900;font-size:16px;letter-spacing:.2px}
.cartSummaryNote{opacity:.9;max-width:520px;line-height:1.25}
.cartSummaryActions{display:flex;gap:10px;flex-wrap:wrap}
.cartSummaryActions .btn{min-width:120px}


/* ===== Home hint ===== */
.homeHint{
  padding:12px 14px;
  border-radius:18px;
  background:rgba(0,0,0,.12);
  border:1px solid rgba(255,255,255,.18);
  box-shadow:0 10px 22px rgba(0,0,0,.14);
}
.homeHintRow{display:flex;align-items:center;justify-content:space-between;gap:10px}
.homeHintTitle{font-weight:900;font-size:14px;letter-spacing:.3px;opacity:.98}
.homeHintClose{
  width:34px;height:34px;border-radius:999px;
  border:1px solid rgba(255,255,255,.18);
  background:rgba(255,255,255,.10);
  color:#fff;
  display:flex;align-items:center;justify-content:center;
  font-size:18px;line-height:1;
}
.homeHintText{margin-top:6px;opacity:.92;line-height:1.25;font-size:13px}
.homeHintActions{margin-top:10px;display:flex;gap:10px;flex-wrap:wrap}
.homeHintActions .btn{white-space:nowrap}


/* ===== Smaller product cards for "similar" ===== */
.pcardSmall .pcardTitle{ -webkit-line-clamp:2; line-clamp:2; }


@media (max-width:420px){
  .checkoutSectionTitle{font-size:15px;margin-bottom:8px}
  .checkoutBlock{padding:10px 10px 8px 10px;border-radius:16px}
  .checkoutBlockTitle{font-size:14px}
  .checkoutBlockText{margin-top:6px;line-height:1.25}
  .checkWrap{margin-top:8px;padding:8px;border-radius:12px}
  .btnSmall{padding:9px 11px;border-radius:12px}
  .checkoutNote{margin-top:10px;font-size:12px;line-height:1.25}
}

/* ===== Accessibility + micro-interactions (v182) ===== */
.btn:focus-visible,
.navBtn:focus-visible,
.optItem:focus-visible,
.chip:focus-visible,
.undoBtn:focus-visible,
.searchClear:focus-visible,
.searchInput:focus-visible {
  outline: none;
  box-shadow: 0 0 0 3px var(--lp-glow-1), 0 0 22px var(--lp-glow-2);
}

.searchInput:focus-visible {
  border-color: var(--lp-border-glow);
}

@keyframes lpSpin {
  to { transform: rotate(360deg); }
}
.spinner {
  width: 34px;
  height: 34px;
  border-radius: 999px;
  border: 3px solid rgba(190,120,255,.25);
  border-top-color: rgba(190,120,255,.95);
  animation: lpSpin .85s linear infinite;
  margin: 0 auto;
}

@keyframes lpPulse {
  0% { transform: scale(1); filter: brightness(1); }
  50% { transform: scale(1.02); filter: brightness(1.15); }
  100% { transform: scale(1); filter: brightness(1); }
}
.pricePulse { animation: lpPulse .28s ease-out; }
.pricePulseBtn { animation: lpPulse .28s ease-out; }

.undoBar {
  position: fixed;
  left: 12px;
  right: 12px;
  bottom: calc(86px + env(safe-area-inset-bottom));
  z-index: 9999;
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
  padding: 12px 14px;
  border-radius: 16px;
  background: rgba(0,0,0,.72);
  border: 1px solid rgba(255,255,255,.14);
  box-shadow: 0 18px 44px rgba(0,0,0,.40), 0 0 26px rgba(190,120,255,.25);
  backdrop-filter: blur(10px);
}

.undoText {
  color: rgba(255,255,255,.92);
  font-size: 14px;
  line-height: 1.25;
}

.undoBtn {
  flex: 0 0 auto;
  border: 1px solid rgba(255,255,255,.18);
  background: rgba(190,120,255,.22);
  color: rgba(255,255,255,.95);
  border-radius: 14px;
  padding: 8px 12px;
  font-weight: 800;
  letter-spacing: .2px;
}
.undoBtn:active { transform: translateY(1px); }


/* Focus-visible (keyboard / accessibility) */
.btn:focus-visible,
.iconBtn:focus-visible,
.navBtn:focus-visible,
.chip:focus-visible,
.searchInput:focus-visible,
.searchClear:focus-visible,
.undoBtn:focus-visible{
  outline: none;
  box-shadow: 0 0 0 2px rgba(190,120,255,.45), 0 0 22px rgba(190,120,255,.25);
}



/* Debug diag box (safe, only visible in debug mode) */
.diagBox{
  width:100%;
  min-height:160px;
  resize:vertical;
  padding:10px 12px;
  border-radius:14px;
  border:1px solid var(--lp-diag-border);
  background: var(--lp-diag-bg);
  color: var(--lp-text);
  font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
  font-size:12px;
  line-height:1.35;
  outline:none;
}

/* =====================
   Progressive images + skeleton shell
   ===================== */
.imgShell{
  position:relative;
  overflow:hidden;
  border-radius:18px;
  background: rgba(255,255,255,.06);
  aspect-ratio: 1 / 1;
}
.imgShell::before{
  content:"";
  position:absolute;
  inset:0;
  transform: translateX(-60%);
  background: linear-gradient(90deg, rgba(255,255,255,.06), rgba(255,255,255,.16), rgba(255,255,255,.06));
  animation: lespawShimmer 1.4s infinite;
  opacity:.55;
}
.imgShell.is-loaded::before{ display:none; }
.imgShell img{
  width:100%;
  height:100%;
  object-fit:cover;
  display:block;
  position:relative;
  z-index:1;
}
@keyframes lespawShimmer{
  0% { transform: translateX(-60%); }
  100% { transform: translateX(60%); }
}

/* Badge pulse (например, после добавления в корзину) */
.badge.is-pulse{
  animation: lespawBadgePulse .65s ease-out;
}
@keyframes lespawBadgePulse{
  0% { transform: scale(1); }
  45% { transform: scale(1.18); }
  100% { transform: scale(1); }
}

/* Respect reduced motion */
@media (prefers-reduced-motion: reduce){
  *{ animation-duration: 0.001ms !important; animation-iteration-count: 1 !important; transition-duration: 0.001ms !important; scroll-behavior: auto !important; }
}


/* =====================
   Utilities (for CSP-safe markup; no inline styles)
   ===================== */
.isHidden{display:none !important;}
.sp8{height:8px;}
.sp10{height:10px;}
.sp12{height:12px;}
.sp14{height:14px;}
.mt6{margin-top:6px;}
.mt8{margin-top:8px;}
.mt10{margin-top:10px;}
.mt12{margin-top:12px;}
.mt14{margin-top:14px;}
.gap10{gap:10px;}
.prewrap{white-space:pre-wrap;}
.opacity85{opacity:.85;}
.opacity88{opacity:.88;}
.cursorDefault{cursor:default;}
.aiCenter{align-items:center;}
.flexWrap{flex-wrap:wrap;}
.minw34{min-width:34px;}
.taCenter{text-align:center;}


/* ===== In-app image viewer ===== */
.noScroll { overflow: hidden !important; }
.imgViewer { position: fixed; inset: 0; z-index: 9999; display: none; }
.imgViewerBackdrop{ position: absolute; inset: 0; background: rgba(0,0,0,.72); backdrop-filter: blur(6px); }
.imgViewerInner{ position: absolute; inset: 0; display:flex; align-items:center; justify-content:center; padding:18px; }
.imgViewerStage{ width:100%; height:100%; max-width:980px; max-height:980px; display:flex; align-items:center; justify-content:center; }

.imgViewerStage{ touch-action: none; }
.imgViewerPan{ display:flex; align-items:center; justify-content:center; max-width:100%; max-height:100%; transform-origin:center center; will-change: transform; }
.imgViewer.isZoomed .imgViewerNav{ opacity:.25; }
.imgViewer.isZoomed .imgViewerDots{ opacity:.35; }

.imgViewerImg{ max-width:100%; max-height:100%; object-fit:contain; border-radius:18px; box-shadow:0 20px 70px rgba(0,0,0,.45); }
.imgViewerClose{ position:absolute; top:14px; right:14px; width:42px; height:42px; border-radius:14px; border:1px solid rgba(255,255,255,.16); background:rgba(20,20,20,.35); color:rgba(255,255,255,.92); font-size:26px; line-height:1; z-index:60; }
.imgViewerNav{ position:absolute; top:50%; transform:translateY(-50%); width:42px; height:42px; border-radius:14px; border:1px solid rgba(255,255,255,.14); background:rgba(20,20,20,.25); color:rgba(255,255,255,.92); font-size:26px; display:flex; align-items:center; justify-content:center; z-index:55; }
.imgViewerPrev{ left:12px; }
.imgViewerNext{ right:12px; }
.imgViewerDots{ position:absolute; bottom:16px; left:0; right:0; display:flex; gap:6px; justify-content:center; pointer-events:none; }
.imgViewerDot{ width:6px; height:6px; border-radius:99px; background: rgba(255,255,255,.25); }
.imgViewerDot.is-active{ background: rgba(255,255,255,.85); }

/* Desktop zoom controls (compact, not громоздко) */
.imgViewerZoom{ position:absolute; left:50%; bottom:54px; transform:translateX(-50%); display:none; align-items:center; gap:10px; padding:10px 12px; border-radius:16px; border:1px solid rgba(255,255,255,.14); background:rgba(20,20,20,.28); box-shadow:0 16px 60px rgba(0,0,0,.35); z-index:58; }
.imgViewerZoomBtn{ width:34px; height:34px; border-radius:12px; border:1px solid rgba(255,255,255,.14); background:rgba(0,0,0,.18); color:rgba(255,255,255,.92); font-size:18px; line-height:1; display:flex; align-items:center; justify-content:center; }
.imgViewerZoomRange{ width:160px; }

@media (hover: hover) and (pointer: fine){
  .imgViewerZoom{ display:flex; }
}

/* ===== Product swipe (pin_single) ===== */
.prodSwipeCtrls{ display:flex; gap:8px; align-items:center; }
.prodSwipeBtn{ width:34px; height:34px; border-radius:12px; border:1px solid rgba(255,255,255,.12); background:rgba(20,20,20,.22); color:rgba(255,255,255,.9); font-size:22px; line-height:1; display:flex; align-items:center; justify-content:center; }
.swipeHint{ margin:10px 0 0 0; padding:10px 12px; border-radius:14px; border:1px solid rgba(255,255,255,.10); background:rgba(20,20,20,.18); color:rgba(255,255,255,.86); font-size:13px; text-align:center; box-shadow:0 10px 32px rgba(0,0,0,.25); backdrop-filter: blur(6px); transition: opacity .35s ease, transform .35s ease; }
.swipeHint.is-hide{ opacity:0; transform: translateY(-6px); }
