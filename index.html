<!doctype html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>LesPaw • Фандомная Атрибутика</title>

  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <link rel="stylesheet" href="styles.css?v=47" />
</head>

<body>
  <header class="top">
    <div class="titleGlow">LesPaw • Фандомная Атрибутика</div>

    <div class="searchWrap">
      <input id="globalSearch" class="searchInput" placeholder="Поиск по фандомам и товарам…" />
      <div class="searchIcon" aria-hidden="true">
        <svg viewBox="0 0 24 24" class="ico" aria-hidden="true">
          <path d="M21 21l-4.3-4.3" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
          <circle cx="11" cy="11" r="7" fill="none" stroke="currentColor" stroke-width="2"/>
        </svg>
      </div>
    </div>
  </header>

  <main class="wrap">
    <section id="view" class="view"></section>
  </main>

  <nav class="navBar">
    <button class="navBtn" id="navBack" aria-label="Назад" title="Назад">
      <svg viewBox="0 0 24 24" class="navIco" aria-hidden="true">
        <path d="M14.5 5.5 8 12l6.5 6.5" fill="none" stroke="currentColor" stroke-width="2.6" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>
    </button>

    <button class="navBtn" id="navFav" aria-label="Избранное" title="Избранное">
      <svg viewBox="0 0 24 24" class="navIco" aria-hidden="true">
        <path d="M12 21s-7-4.6-9.5-8.9C.8 8.8 2.2 6 4.9 5.2c1.7-.5 3.5.1 4.7 1.4L12 9l2.4-2.4c1.2-1.3 3-1.9 4.7-1.4 2.7.8 4.1 3.6 2.4 6.9C19 16.4 12 21 12 21z"
              fill="none" stroke="currentColor" stroke-width="2.6" stroke-linejoin="round"/>
      </svg>
      <span class="badge" id="favCount" style="display:none">0</span>
    </button>

    <button class="navBtn" id="navCart" aria-label="Корзина" title="Корзина">
      <svg viewBox="0 0 24 24" class="navIco" aria-hidden="true">
        <path d="M6 7h15l-2 10H7L6 7z" fill="none" stroke="currentColor" stroke-width="2.6" stroke-linejoin="round"/>
        <path d="M6 7 5 4H2" fill="none" stroke="currentColor" stroke-width="2.6" stroke-linecap="round"/>
        <path d="M9 21a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm8 0a1 1 0 1 0 0-2 1 1 0 0 0 0 2z"
              fill="none" stroke="currentColor" stroke-width="2.6"/>
      </svg>
      <span class="badge" id="cartCount" style="display:none">0</span>
    </button>
  </nav>

  <!-- Boot diagnostics: покажет "Загрузка" и объяснит, если app.js не подцепился/упал -->
  <script>
    (function () {
      var v = document.getElementById('view');
      if (v) {
        v.innerHTML = '' +
          '<div class="card">' +
          '  <div class="h2">Загрузка…</div>' +
          '  <div class="small">Если этот экран не исчезает — значит, app.js не загрузился или упал с ошибкой.</div>' +
          '</div>';
      }

      window.addEventListener('error', function (e) {
        var msg = (e && (e.message || (e.error && e.error.message))) || 'Неизвестная ошибка';
        var src = (e && e.filename) ? ('\n' + e.filename + ':' + e.lineno) : '';
        if (v) {
          v.innerHTML = '' +
            '<div class="card">' +
            '  <div class="h2">Ошибка JavaScript</div>' +
            '  <div class="small" style="white-space:pre-wrap">' + msg + src + '</div>' +
            '</div>';
        }
      });
    })();
  </script>

  <script src="app.js?v=46" onerror="document.getElementById('view').innerHTML='<div class=\"card\"><div class=\"h2\">app.js не загрузился</div><div class=\"small\">Проверь, что файл app.js реально лежит рядом с index.html и GitHub Pages отдал его без 404.</div></div>'"></script>
</body>
</html>
